To build:

python setup_cython.py  build_ext --inplace

To test (in ipython):

import numpy as np
import ocl_azim

tth = np.fromfile("corner.dat", dtype=np.float32)
image = np.fromfile("image2k.dat", dtype=np.float32)
tth_low = tth[0::2]
tth_hi = tth[1::2]
tth_center = (tth_low+tth_hi)/2.
dtth = abs(tth_hi-tth_low)/2.0
N = 1024 * 2048
Nbins = 1024

solid = np.ones(N, dtype=np.float32)

fhistf = np.zeros(Nbins, dtype=np.float32)
fbinf = np.zeros(Nbins, dtype=np.float32)

tth_min = max(0.0,float(tth.min()))
tth_max = float(tth.max())

mask = np.zeros(N, dtype=np.int)

a = ocl_azim.Integrator1d()
a.init("gpu", False)
a.getConfiguration(N, Nbins)
a.configure()
a.loadTth(tth, dtth, tth_min, tth_max)
a.setSolidAngle(solid)
a.setMask(mask)
xrpd,count = a.execute(image)
#optionally
plot(xrpd)